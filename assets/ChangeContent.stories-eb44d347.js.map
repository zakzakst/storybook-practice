{"version":3,"file":"ChangeContent.stories-eb44d347.js","sources":["../../src/components/test/TestChangeContent2.vue"],"sourcesContent":["<template>\r\n  <div class=\"change-content-2-wrapper\">\r\n    <div ref=\"changeContent2Ref\" class=\"change-content-2\" @mousedown=\"mouseDownHandler\">\r\n      <div class=\"container\">\r\n        <!-- ▼▼▼ type-1 ▼▼▼ -->\r\n        <div class=\"content --type-1\" :class=\"{ '--current': currentType === 'type-1' }\">\r\n          <div class=\"buttons\" :class=\"{ '--hide': isButtonsHide }\">\r\n            <button class=\"button --1-2\" @click=\"changeType('type-2')\">2</button>\r\n            <button class=\"button --1-3\" @click=\"changeType('type-3')\">3</button>\r\n            <button class=\"detail-button --1\" @click=\"isDetailShow = true\">詳細1</button>\r\n            <button class=\"detail-button --2\" @click=\"isDetailShow = true\">詳細2</button>\r\n          </div>\r\n          <div class=\"bg\">\r\n            <img class=\"img\" src=\"https://picsum.photos/id/11/900/900\" alt=\"\">\r\n          </div>\r\n        </div>\r\n        <!-- ▲▲▲ type-1 ▲▲▲ -->\r\n\r\n        <!-- ▼▼▼ type-2 ▼▼▼ -->\r\n        <div class=\"content --type-2\" :class=\"{ '--current': currentType === 'type-2' }\">\r\n          <div class=\"buttons\" :class=\"{ '--hide': isButtonsHide }\">\r\n            <button class=\"button --2-1\" @click=\"changeType('type-1')\">1</button>\r\n            <button class=\"button --2-3\" @click=\"changeType('type-3')\">3</button>\r\n            <button class=\"detail-button --3\" @click=\"isDetailShow = true\">詳細3</button>\r\n            <button class=\"detail-button --4\" @click=\"isDetailShow = true\">詳細4</button>\r\n          </div>\r\n          <div class=\"bg\">\r\n            <img class=\"img\" src=\"https://picsum.photos/id/17/900/900\" alt=\"\">\r\n          </div>\r\n        </div>\r\n        <!-- ▲▲▲ type-2 ▲▲▲ -->\r\n\r\n        <!-- ▼▼▼ type-3 ▼▼▼ -->\r\n        <div class=\"content --type-3\" :class=\"{ '--current': currentType === 'type-3' }\">\r\n          <div class=\"buttons\" :class=\"{ '--hide': isButtonsHide }\">\r\n            <button class=\"button --3-1\" @click=\"changeType('type-1')\">1</button>\r\n            <button class=\"button --3-2\" @click=\"changeType('type-2')\">2</button>\r\n            <button class=\"detail-button --5\" @click=\"isDetailShow = true\">詳細5</button>\r\n            <button class=\"detail-button --6\" @click=\"isDetailShow = true\">詳細6</button>\r\n          </div>\r\n          <div class=\"bg\">\r\n            <img class=\"img\" src=\"https://picsum.photos/id/28/900/900\" alt=\"\">\r\n          </div>\r\n        </div>\r\n        <!-- ▲▲▲ type-3 ▲▲▲ -->\r\n      </div>\r\n    </div>\r\n    <transition name=\"detail\">\r\n      <div v-if=\"isDetailShow\" class=\"detail\">\r\n        <div class=\"inner\">\r\n          <h3>詳細名</h3>\r\n          <p>テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。テキストが入ります。</p>\r\n          <button @click=\"isDetailShow = false\">閉じる</button>\r\n        </div>\r\n      </div>\r\n    </transition>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref } from 'vue'\r\n/* @ts-ignore */\r\nimport anime from '../../../node_modules/animejs/lib/anime.es.js'\r\n\r\nconst changeContent2Ref = ref()\r\nconst pos = ref({\r\n  top: 0,\r\n  left: 0,\r\n  x: 0,\r\n  y: 0,\r\n})\r\nconst currentType = ref('type-1')\r\nconst isButtonsHide = ref(false)\r\nconst isDetailShow = ref(false)\r\n\r\n// 画像ドラッグ関連\r\nconst mouseMoveHandler = (e: MouseEvent) => {\r\n  const dx = e.clientX - pos.value.x\r\n  const dy = e.clientY - pos.value.y\r\n  changeContent2Ref.value.scrollTop = pos.value.top - dy\r\n  changeContent2Ref.value.scrollLeft = pos.value.left - dx\r\n}\r\n\r\nconst mouseUpHandler = () => {\r\n  document.removeEventListener('mousemove', mouseMoveHandler)\r\n  document.removeEventListener('mouseup', mouseUpHandler)\r\n  changeContent2Ref.value.style.cursor = null\r\n  changeContent2Ref.value.style.userSelect = null\r\n}\r\n\r\nconst mouseDownHandler = (e: MouseEvent) => {\r\n  changeContent2Ref.value.style.cursor = 'grabbing'\r\n  changeContent2Ref.value.style.userSelect = 'none'\r\n  pos.value.left = changeContent2Ref.value.scrollLeft\r\n  pos.value.top = changeContent2Ref.value.scrollTop\r\n  pos.value.x = e.clientX\r\n  pos.value.y = e.clientY\r\n  document.addEventListener('mousemove', mouseMoveHandler)\r\n  document.addEventListener('mouseup', mouseUpHandler)\r\n}\r\n\r\n// コンテンツ切替アニメーション\r\nconst changeType = (type: string) => {\r\n  const currentContentBgEl = document.querySelector('.content.--current .bg')\r\n  const targetContentBgEl = document.querySelector(`.content.--${type} .bg`)\r\n  isButtonsHide.value = true\r\n  const tl = anime.timeline()\r\n  tl.add({\r\n    easing: 'easeInOutCirc',\r\n    targets: currentContentBgEl,\r\n    opacity: [1, 0],\r\n    scale: [1, 1.1],\r\n    duration: 1000,\r\n  }, 500)\r\n  tl.add({\r\n    easing: 'easeInOutCirc',\r\n    targets: targetContentBgEl,\r\n    opacity: [0, 1],\r\n    scale: [1.1, 1],\r\n    duration: 1000,\r\n    complete: () => {\r\n      currentType.value = type\r\n      isButtonsHide.value = false\r\n    },\r\n  }, 500)\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n$size: 500;\r\n.change-content-2 {\r\n  position: relative;\r\n  overflow: auto;\r\n  cursor: grab;\r\n  width: #{$size}px;\r\n  height: #{$size}px;\r\n  > .container {\r\n    position: relative;\r\n    // width: 100%;\r\n    // height: 100%;\r\n    width: #{$size * 1.5}px;\r\n    height: #{$size * 1.5}px;\r\n    > .content {\r\n      position: absolute;\r\n      top: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n      right: 0;\r\n      z-index: 0;\r\n      overflow: hidden;\r\n      &.--current {\r\n        z-index: 1;\r\n        .bg {\r\n          transform: scale(1);\r\n          opacity: 1;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .buttons {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    opacity: 1;\r\n    z-index: 2;\r\n    transition: all 0.5s;\r\n    &.--hide {\r\n      opacity: 0;\r\n      transform: translateY(20px);\r\n    }\r\n    > .button {\r\n      position: absolute;\r\n      width: 90px;\r\n      height: 90px;\r\n      background: #900;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      color: #fff;\r\n      font-size: bold;\r\n      font-size: 24px;\r\n      border: none;\r\n      border-radius: 50%;\r\n      cursor: pointer;\r\n      &.--1-2 {\r\n        top: 20%;\r\n        left: 30%;\r\n      }\r\n      &.--1-3 {\r\n        bottom: 30%;\r\n        right: 40%;\r\n      }\r\n      &.--2-1 {\r\n        top: 40%;\r\n        left: 10%;\r\n      }\r\n      &.--2-3 {\r\n        bottom: 20%;\r\n        right: 20%;\r\n      }\r\n      &.--3-1 {\r\n        top: 30%;\r\n        left: 50%;\r\n      }\r\n      &.--3-2 {\r\n        bottom: 60%;\r\n        right: 60%;\r\n      }\r\n    }\r\n    > .detail-button {\r\n      position: absolute;\r\n      width: 90px;\r\n      height: 90px;\r\n      background: #009;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      color: #fff;\r\n      font-size: bold;\r\n      font-size: 24px;\r\n      border: none;\r\n      cursor: pointer;\r\n      &.--1 {\r\n        top: 10%;\r\n        right: 10%;\r\n      }\r\n      &.--2 {\r\n        bottom: 20%;\r\n        left: 10%;\r\n      }\r\n      &.--3 {\r\n        top: 10%;\r\n        left: 30%;\r\n      }\r\n      &.--4 {\r\n        top: 20%;\r\n        right: 10%;\r\n      }\r\n      &.--5 {\r\n        bottom: 20%;\r\n        right: 10%;\r\n      }\r\n      &.--6 {\r\n        bottom: 10%;\r\n        left: 10%;\r\n      }\r\n    }\r\n  }\r\n  .bg {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    z-index: 1;\r\n    transform: scale(1.1);\r\n    opacity: 0;\r\n    background: #fff;\r\n    > .img {\r\n      width: 100%;\r\n      height: 100%;\r\n      object-fit: cover;\r\n      vertical-align: bottom;\r\n    }\r\n  }\r\n}\r\n\r\n.change-content-2-wrapper {\r\n  position: relative;\r\n  width: #{$size}px;\r\n  height: #{$size}px;\r\n  .detail {\r\n    position: absolute;\r\n    top: 0;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    z-index: 2;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    > .inner {\r\n      width: 80%;\r\n      background: #fff;\r\n      padding: 24px;\r\n      border-radius: 16px;\r\n    }\r\n  }\r\n}\r\n\r\n.detail-enter-active,\r\n.detail-leave-active {\r\n  transition: opacity 0.5s ease;\r\n}\r\n\r\n.detail-enter-from,\r\n.detail-leave-to {\r\n  opacity: 0;\r\n}\r\n</style>"],"names":["changeContent2Ref","ref","pos","currentType","isButtonsHide","isDetailShow","mouseMoveHandler","__name","e","dx","dy","mouseUpHandler","mouseDownHandler","changeType","type","currentContentBgEl","targetContentBgEl","tl","anime"],"mappings":"m/BAgEA,MAAMA,EAAoBC,IACpBC,EAAMD,EAAI,CACd,IAAK,EACL,KAAM,EACN,EAAG,EACH,EAAG,CAAA,CACJ,EACKE,EAAcF,EAAI,QAAQ,EAC1BG,EAAgBH,EAAI,EAAK,EACzBI,EAAeJ,EAAI,EAAK,EAGxBK,EAAmBC,EAACC,GAAkB,CAC1C,MAAMC,EAAKD,EAAE,QAAUN,EAAI,MAAM,EAC3BQ,EAAKF,EAAE,QAAUN,EAAI,MAAM,EACjCF,EAAkB,MAAM,UAAYE,EAAI,MAAM,IAAMQ,EACpDV,EAAkB,MAAM,WAAaE,EAAI,MAAM,KAAOO,CAAA,EAJ/B,oBAOnBE,EAAiBJ,EAAA,IAAM,CAClB,SAAA,oBAAoB,YAAaD,CAAgB,EACjD,SAAA,oBAAoB,UAAWK,CAAc,EACpCX,EAAA,MAAM,MAAM,OAAS,KACrBA,EAAA,MAAM,MAAM,WAAa,IAAA,EAJtB,kBAOjBY,EAAmBL,EAACC,GAAkB,CACxBR,EAAA,MAAM,MAAM,OAAS,WACrBA,EAAA,MAAM,MAAM,WAAa,OACvCE,EAAA,MAAM,KAAOF,EAAkB,MAAM,WACrCE,EAAA,MAAM,IAAMF,EAAkB,MAAM,UACpCE,EAAA,MAAM,EAAIM,EAAE,QACZN,EAAA,MAAM,EAAIM,EAAE,QACP,SAAA,iBAAiB,YAAaF,CAAgB,EAC9C,SAAA,iBAAiB,UAAWK,CAAc,CAAA,EAR5B,oBAYnBE,EAAaN,EAACO,GAAiB,CAC7B,MAAAC,EAAqB,SAAS,cAAc,wBAAwB,EACpEC,EAAoB,SAAS,cAAc,cAAcF,OAAU,EACzEV,EAAc,MAAQ,GAChB,MAAAa,EAAKC,EAAM,WACjBD,EAAG,IAAI,CACL,OAAQ,gBACR,QAASF,EACT,QAAS,CAAC,EAAG,CAAC,EACd,MAAO,CAAC,EAAG,GAAG,EACd,SAAU,KACT,GAAG,EACNE,EAAG,IAAI,CACL,OAAQ,gBACR,QAASD,EACT,QAAS,CAAC,EAAG,CAAC,EACd,MAAO,CAAC,IAAK,CAAC,EACd,SAAU,IACV,SAAU,IAAM,CACdb,EAAY,MAAQW,EACpBV,EAAc,MAAQ,EACxB,GACC,GAAG,CAAA,EAtBW;;;;;;;;;;;;"}